<table
  mat-table
  [dataSource]="dataSource"
  matSort
  class="mat-elevation-z8 centered-content"
>
  <!-- ID Column -->
  <ng-container matColumnDef="_id" *ngIf="isAdmin">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>
    <td mat-cell *matCellDef="let element">{{ element._id }}</td>
  </ng-container>

  <!-- Name Column -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
    <td mat-cell *matCellDef="let element">{{ element.name }}</td>
  </ng-container>

  <!-- Creator Column -->
  <ng-container matColumnDef="creator">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Creator</th>
    <td mat-cell *matCellDef="let element">{{ element.creator }}</td>
  </ng-container>

  <!-- Nomination Column -->
  <ng-container matColumnDef="nomination">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Nomination</th>
    <td mat-cell *matCellDef="let element">
      <mat-icon>{{ element.nomination ? "check" : "close" }}</mat-icon>
    </td>
  </ng-container>

  <!-- Blind Column -->
  <ng-container matColumnDef="blind">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Blind</th>
    <td mat-cell *matCellDef="let element">
      <mat-icon>{{ element.blind ? "check" : "close" }}</mat-icon>
    </td>
  </ng-container>

  <!-- Deadline Nomination Column -->
  <ng-container matColumnDef="deadlineNomination">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>
      Deadline Nomination
    </th>
    <td
      mat-cell
      *matCellDef="let element"
      class="{{ passedDeadline(element.nomination, element.deadlineNomination) }}"
    >
      {{
        element.nomination
          ? (element.deadlineNomination | date : "dd/MM/yyyy HH:mm")
          : ""
      }}
    </td>
  </ng-container>

  <!-- Deadline Column -->
  <ng-container matColumnDef="deadline">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Deadline</th>
    <td
      mat-cell
      *matCellDef="let element"
      class="{{ passedDeadline(true, element.deadline) }}"
    >
      {{ element.deadline | date : "dd/MM/yyyy HH:mm" }}
    </td>
  </ng-container>

  <!-- Number Songs Column -->
  <ng-container matColumnDef="numberSongs">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Songs</th>
    <td mat-cell *matCellDef="let element">{{ element.numberSongs }}</td>
  </ng-container>

  <ng-container matColumnDef="options" *ngIf="isCreator">
    <th mat-header-cell *matHeaderCellDef>Options</th>
    <td mat-cell *matCellDef="let element">
      <button
        mat-icon-button
        [matMenuTriggerFor]="menu"
        aria-label="Options"
        (click)="$event.stopPropagation()"
      >
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button
          mat-menu-item
          target="_blank"
          [routerLink]="['/pr/', element._id]"
        >
          <mat-icon>info</mat-icon>
          <span>Details</span>
        </button>
      </mat-menu>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr
    mat-row
    *matRowDef="let row; columns: displayedColumns"
    [ngClass]="{ clickable: isLoggedIn }"
    [routerLink]="isLoggedIn ? ['/sheet', row._id] : null"
  ></tr>
</table>
